{"ast":null,"code":"import _regeneratorRuntime from\"/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{observer}from'mobx-react';import LoginForm from'./components/LoginForm';import SubmitButton from'./components/SubmitButton';import UserStore from'./stores/UserStore';import'./App.css';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('isLoggedIn',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context.sent;_context.next=6;return res.json();case 6:result=_context.sent;if(result&&result.success){UserStore.loading=false;UserStore.isLoggedIn=true;UserStore.username=result.username;}else{UserStore.loading=false;UserStore.isLoggedIn=false;}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);UserStore.loading=false;UserStore.isLoggedIn=false;case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"doLogout\",value:function(){var _doLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/logout',{method:'post',headers:{'Accept':'application/json','Content-Type':'application/json'}});case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:result=_context2.sent;if(result&&result.success){UserStore.isLoggedIn=false;UserStore.username='';// resetting username that is stored \n}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));function doLogout(){return _doLogout.apply(this,arguments);}return doLogout;}()},{key:\"render\",value:function render(){var _this=this;if(UserStore.loading){return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},\"Loading, please wait..\"));}else{if(UserStore.isLoggedIn){return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},\"Welcome \",UserStore.username,/*#__PURE__*/React.createElement(SubmitButton,{text:'Log out',disabled:false,onClick:function onClick(){return _this.doLogout();}})));}}return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container2\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/public/First_Dash_Logo_Black.png\",alt:\"First Dash Logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"container3\"},/*#__PURE__*/React.createElement(LoginForm,null)))));}}]);return App;}(React.Component);export default observer(App);","map":{"version":3,"sources":["/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/src/App.js"],"names":["React","observer","LoginForm","SubmitButton","UserStore","App","fetch","method","headers","res","json","result","success","loading","isLoggedIn","username","console","log","doLogout","Component"],"mappings":"usCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,YAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CACA,MAAO,WAAP,C,GAEMC,CAAAA,G,ufAIkBC,CAAAA,KAAK,CAAC,YAAD,CAAe,CAClCC,MAAM,CAAE,MAD0B,CAElCC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAFyB,CAAf,C,QAAjBC,G,qCAQeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,eAEJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC5BR,SAAS,CAACS,OAAV,CAAoB,KAApB,CACAT,SAAS,CAACU,UAAV,CAAuB,IAAvB,CACAV,SAAS,CAACW,QAAV,CAAqBJ,MAAM,CAACI,QAA5B,CACD,CAJD,IAKK,CACHX,SAAS,CAACS,OAAV,CAAoB,KAApB,CACAT,SAAS,CAACU,UAAV,CAAuB,KAAvB,CACD,C,iFAIDV,SAAS,CAACS,OAAV,CAAoB,KAApB,CACAT,SAAS,CAACU,UAAV,CAAuB,KAAvB,C,0dAMgBR,CAAAA,KAAK,CAAC,SAAD,CAAY,CAC/BC,MAAM,CAAE,MADuB,CAE/BC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAFsB,CAAZ,C,QAAjBC,G,uCAQeA,CAAAA,GAAG,CAACC,IAAJ,E,QAAfC,M,gBAEJ,GAAIA,MAAM,EAAIA,MAAM,CAACC,OAArB,CAA8B,CAC5BR,SAAS,CAACU,UAAV,CAAuB,KAAvB,CACAV,SAAS,CAACW,QAAV,CAAqB,EAArB,CAAyB;AAC1B,C,qFAIDC,OAAO,CAACC,GAAR,e,gMAKG,gBAEP,GAAIb,SAAS,CAACS,OAAd,CAAsB,CACpB,mBACM,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,2BADJ,CADN,CAOD,CARD,IAUK,CAEH,GAAIT,SAAS,CAACU,UAAd,CAA0B,CAExB,mBACE,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,aACaV,SAAS,CAACW,QADvB,cAGI,oBAAC,YAAD,EACI,IAAI,CAAE,SADV,CAEI,QAAQ,CAAE,KAFd,CAGI,OAAO,CAAG,yBAAM,CAAA,KAAI,CAACG,QAAL,EAAN,EAHd,EAHJ,CADJ,CADF,CAcD,CAGF,CACD,mBACM,2BAAK,SAAS,CAAC,KAAf,eACI,2BAAK,SAAS,CAAC,WAAf,eACI,2BAAK,SAAS,CAAC,YAAf,eACE,2BAAK,GAAG,CAAC,2HAAT,CAAqI,GAAG,CAAC,iBAAzI,EADF,cAEE,2BAAK,SAAS,CAAC,YAAf,eACE,oBAAC,SAAD,MADF,CAFF,CADJ,CADJ,CADN,CAaD,C,iBAtGelB,KAAK,CAACmB,S,EAyGxB,cAAelB,CAAAA,QAAQ,CAACI,GAAD,CAAvB","sourcesContent":["import React from 'react';\nimport { observer } from 'mobx-react';\nimport LoginForm from './components/LoginForm';\nimport SubmitButton from './components/SubmitButton';\nimport UserStore from './stores/UserStore';\nimport './App.css';\n\nclass App extends React.Component {\n  \n  async componentDidMount() {\n    try {\n        let res = await fetch('isLoggedIn', {\n          method: 'post',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        });\n\n        let result = await res.json();\n\n        if (result && result.success) {\n          UserStore.loading = false;\n          UserStore.isLoggedIn = true;\n          UserStore.username = result.username;\n        }\n        else {\n          UserStore.loading = false;\n          UserStore.isLoggedIn = false;\n        }\n    }\n\n    catch(e){\n        UserStore.loading = false;\n        UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout() {\n    try {\n        let res = await fetch('/logout', {\n          method: 'post',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        });\n\n        let result = await res.json();\n\n        if (result && result.success) {\n          UserStore.isLoggedIn = false;\n          UserStore.username = ''; // resetting username that is stored \n        }\n    }\n\n    catch(e){\n        console.log(e);\n    }\n  }\n\n\n  render() {\n\n    if (UserStore.loading){\n      return(\n            <div className=\"app\">\n                <div className=\"container\">\n                    Loading, please wait..\n                </div>\n            </div>\n      );\n    }\n\n    else {\n      \n      if (UserStore.isLoggedIn) {\n\n        return(\n          <div className=\"app\">\n              <div className=\"container\">\n                  Welcome {UserStore.username}\n                  \n                  <SubmitButton\n                      text={'Log out'}\n                      disabled={false}\n                      onClick={ () => this.doLogout() }\n                  />\n              </div>\n          </div>\n    );\n\n      }\n      \n     \n    }\n    return (\n          <div className=\"app\">\n              <div className=\"container\">\n                  <div className=\"container2\">\n                    <img src=\"/Users/PravinSelvarajah/Documents/GitHub/Learning_React/React_JS_Tutorial/frontend_login/public/First_Dash_Logo_Black.png\" alt=\"First Dash Logo\"/>\n                    <div className=\"container3\">\n                      <LoginForm/>\n                    </div>\n                  </div>\n              </div>\n          </div>\n    );\n\n  }\n}\n\nexport default observer(App);\n"]},"metadata":{},"sourceType":"module"}